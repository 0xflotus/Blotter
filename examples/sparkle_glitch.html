<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <style type="text/css">
      body {
        background: #000000;
        padding: 20px;
        font-family: serif;
        font-size: 64px;
        font-weight: 100;
        line-height: 1.5;
        color: #FFFFFF;
      }

      canvas {
        padding: 0;
        margin: 0;
        vertical-align: top;
      }
    </style>

    <script type="text/javascript" src="./third_party/jquery.min.js"></script>
    <script type="text/javascript" src="./third_party/dat.gui.js"></script>
    <script type="text/javascript" src="./third_party/Tween.js"></script>
    <script type="text/javascript" src="../build/blotter.js"></script>
    <script type="text/javascript" src="../build/filters/sparkleGlitchMaterial.js"></script>
  </head>
  <body>
    <span id="filter-target"></span>
    <script>


      $(document).ready(function() {

        var styleProperties = {
          family: "sans-serif",
          size: 468,
          weight: 800,
          leading: 1.02,
          paddingLeft: 20,
          paddingRight: 20
        };

        var text = new Blotter.Text("hello", styleProperties);

        var material = new Blotter.SparkleGlitchMaterial();
        material.uniforms.uPointRadius.value = 2.0;

        var blotter = new Blotter(material, {
          texts : text
        });

        var myScope = blotter.forText(text);

        blotter.on("ready", function () {
          myScope.appendTo(document.getElementById("filter-target"));
        });

        var controls = {
          message : "dat.gui",
          uAnimate : !!material.uniforms.uAnimate.value,
          uPointRadius : material.uniforms.uPointRadius.value,
          uPointCellWidth : material.uniforms.uPointCellWidth.value
        };



        // var weightMin = { value : 6.0 },
        //     weightMax = { value : 12.0 },
        //     currentWeight = { value : 4.0 };


        // var startTime = new Date().getTime();

        // myScope.on("render", function () {
        //   var time = (new Date().getTime() - startTime);
        //   myScope.material.uniforms.uPointRadius.value = currentWeight.value;
        //   TWEEN.update(time);
        // });

        // var tween = new TWEEN.Tween(currentWeight)
        //     .to({ value : 4.0 }, 100, TWEEN.Easing.Linear)
        //     .start();

        // myScope.on("mouseenter", function () {
        //   tween._valuesEnd.value = 13.0;
        //   tween.start();
        // });

        // myScope.on("mouseleave", function () {
        //   tween._valuesEnd.value = 4.0;
        //   tween.start();
        // });





        var gui = new dat.GUI();

        gui.add(controls, "uAnimate").onChange(function (bool) {
          material.uniforms.uAnimate.value = bool ? 1.0 : 0.0;
        });
        gui.add(controls, "uPointRadius", 0.0, 30.0).onChange(function (radius) {
          material.uniforms.uPointRadius.value = radius;
        });
        gui.add(controls, "uPointCellWidth", 0.0, 30.0).onChange(function (width) {
          material.uniforms.uPointCellWidth.value = width;
        });

      });
    </script>
  </body>
</html>
