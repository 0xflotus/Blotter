<!doctype html>
<html lang="en-us">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=400">
    <meta name="description" content="DESCRIPTION HERE">
    <meta name="keywords" content="blotter.js, blotter, javascript, library, graphics, text, rendering, effects, styles, web, html5">
    <meta name="author" content="bradley">
    <link rel="image_src" href="../images/logo.gif" />
    <title>Blotter.js</title>

    <link rel="shortcut icon" type="image/gif" href="../images/favicon.ico">

    <link href="https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,400i" rel="stylesheet">

    <!--
      /**
      * @license
      * MyFonts Webfont Build ID 3296227, 2016-10-15T22:01:05-0400
      *
      * The fonts listed in this notice are subject to the End User License
      * Agreement(s) entered into by the website owner. All other parties are
      * explicitly restricted from using the Licensed Webfonts(s).
      *
      * You may obtain a valid license at the URLs below.
      *
      * Webfont: SerapionPro-BoldItalic by Storm
      * URL: http://www.myfonts.com/fonts/storm/serapion/bold-italic/
      *
      * Webfont: SerapionPro by Storm
      * URL: http://www.myfonts.com/fonts/storm/serapion/regular/
      *
      *
      * License: http://www.myfonts.com/viewlicense?type=web&buildid=3296227
      * Licensed pageviews: 10,000
      * Webfonts copyright: Copyright (c) Frantisek Storm. www.stormtype.com, 2005. All
      * rights reserved.
      *
      * © 2016 MyFonts Inc
      */

    -->
    <link rel="stylesheet" type="text/css" href="../styles/MyFontsWebfontsKit.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/5.0.0/normalize.min.css">
    <link rel="stylesheet" type="text/css" href="../styles/main.css">

    <script type="text/javascript">
      var BlotterSite = {};
    </script>

    <script src="../third_party/jquery.min.js"></script>
    <script src="../third_party/blotter.min.js"></script>
    <script src="../third_party/codemirror.min.js"></script>
    <script src="../third_party/javascript.js"></script>
    <script src="../third_party/EventEmitter.js"></script>

    <script type="text/javascript">

      $(function() {

        BlotterSite.Editor = function (el) {
          this.init.apply(this, arguments);
        };

        BlotterSite.Editor.prototype = (function () {

          function _buildJSMirror (el, code) {
            return CodeMirror(el, {
              value: code,
              mode: "javascript",
              tabSize: 2,
              lineWrapping: true,
              lineNumbers: true
            });
          }

          function _buildHTMLMirror (el, code) {
            return CodeMirror(el, {
              value: code,
              mode: "html",
              tabSize: 2,
              lineWrapping: true,
              lineNumbers: true
            });
          }

          return {

            constructor : BlotterSite.Editor,

            init : function (el) {
              this.el = el;
              this.outputEl = el.find(".output");

              this.jsCode = el.find("script.js-code").html();
              this.htmlCode = this.outputEl.html();
              this.jsContent = el.find(".js-content");
              this.htmlContent = el.find(".html-content");

              this.jsMirror = _buildJSMirror(this.jsContent[0], this.jsCode);
              this.htmlMirror = _buildHTMLMirror(this.htmlContent[0], this.htmlCode);

              this.jsMirror.on("change", _.bind(_.debounce(this.update, 1000), this));
              this.htmlMirror.on("change", _.bind(_.debounce(this.update, 1000), this));

              this.htmlDoc = this.htmlMirror.getDoc();
              this.jsDoc = this.jsMirror.getDoc();

              this.setupListeners();
              this.update();
              this.showJSContent();
            },

            setupListeners : function () {
              this.el.find(".js-tab").on("click", _.bind(this.showJSContent, this));
              this.el.find(".html-tab").on("click", _.bind(this.showHTMLContent, this));
            },

            update : function() {
              this.htmlMirror.setSize("auto", "auto");
              this.htmlCode = this.htmlDoc.getValue();
              try {
                this.outputEl.html(unescape(this.htmlCode));
              } catch (e) {
                console.log(e);
              }

              this.jsMirror.setSize("auto", "auto");
              this.jsCode = this.jsDoc.getValue();
              try {
                eval(this.jsCode); // yikes!
              } catch (e) {
                console.log(e);
              }
            },

            showJSContent : function () {
              this.htmlContent.hide();
              this.jsContent.show();
            },

            showHTMLContent : function () {
              this.jsContent.hide();
              this.htmlContent.show();
            },

            largestSize : function () {
              var htmlMirrorSize = this.htmlMirror.getScrollInfo(),
                  jsMirrorSize = this.jsMirror.getScrollInfo(),
                  size = {};

              size.width = Math.max(jsMirrorSize.width, htmlMirrorSize.width);
              size.height = Math.max(jsMirrorSize.height, htmlMirrorSize.height);

              return size;
            }
          }
        })();


        $(document).ready(function () {

          // Setup editors
          BlotterSite.editors = (function (editors) {
            return {
              editors : editors,

              update : function () {
                _.each(this.editors, function (editor) {
                  editor.update();
                });
              }
            }
          })(_.reduce($(".tabbed-editor"), function (m, el) {
            m.push(new BlotterSite.Editor($(el)));
            return m;
          }, []));

        });
      });

    </script>
  </head>
  <body>

    <div id="masthead">
      <!-- Preload Serapion -->
      <div style="font-family: 'SerapionPro', serif; height: 0;">&nbsp;</div>
      <a href="../index2.html" class="logo-anchor"><div id="logo"></div></a>
      <script src="../src/logo.js"></script>
    </div>

    <div id="content">
      <div class="content-right">
        <h2>RollDistortMaterial</h2>
        <p>
          When applying effects to text on the <code>WebGL</code>, designers have traditionally been constrained to those provided by  CSS. In the majority of cases this is entirely suitable – text is text, right? Yet still, there exist numerous examples of designers combining style properties or gifs and images to create effects that evoke something more playful. Precisely here, Blotter exists to provide an alternative.
        </p>
      </div>
      <div class="output-container">
        <div class="output"><div id="draw-text">observation</div></div>
      </div>
      <script type="text/javascript">
      // BLOTTER - Example 1
      var text = new Blotter.Text("observation", {
        family : "'Garamond', serif",
        size : 27,
        fill : "#171717"
      });

      var material = new Blotter.RollDistortMaterial();
      material.uniforms.uDistortion.value = 3.0;
      material.uniforms.uDistortion2.value = 5.0;
      var blotter = new Blotter(material, {
        texts : text
      });

      var elem = $("#draw-text");
      var myScope = blotter.forText(text);
      var startTime = new Date().getTime()

      blotter.on("ready", function () {
        elem.html(myScope.domElement);
      });

      myScope.on("render", function () {
      var time = (new Date().getTime() - startTime) / 1000;
        myScope.material.uniforms.uTime.value = time;
      });
    </script>

    </div>
  </body>
</html>